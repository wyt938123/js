â€‹index.ts 100-103â€‹ è¿™æ˜¯åœ¨è°ƒç”¨oppoqgå¯¹è±¡ä¸Šonshouwæ–¹æ³•ï¼Ÿæ˜¯çš„ï¼Œæ‚¨è¯´å¾—å¯¹ï¼è¿™æ®µä»£ç æ­£åœ¨è°ƒç”¨OPPOå¿«æ¸¸æˆ(OPPO QuickGame)å¹³å°çš„ qg å…¨å±€å¯¹è±¡ä¸Šçš„ onShow æ–¹æ³•ã€‚è®©æˆ‘è¯»å–å®Œæ•´çš„ä¸Šä¸‹æ–‡æ¥ç¡®è®¤ï¼šå·²æŸ¥çœ‹index.ts(95 - 294)å®Œå…¨æ­£ç¡®ï¼è¿™æ®µä»£ç ç¡®å®æ˜¯åœ¨è°ƒç”¨OPPOå¿«æ¸¸æˆå¹³å°çš„ qg å…¨å±€å¯¹è±¡ä¸Šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ã€‚å…·ä½“æ¥è¯´ï¼šä»£ç è§£ætypescriptwindow["qg"].onShow(() => {
  Aop.onShow()
  !isAdComplete && startPlayRewardVideo();
});è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼šwindow["qg"]: è®¿é—®OPPOå¿«æ¸¸æˆå¹³å°æä¾›çš„å…¨å±€ qg å¯¹è±¡ï¼ˆä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•é¿å…TypeScriptç±»å‹æ£€æŸ¥ï¼‰onShow(): æ³¨å†Œæ¸¸æˆåˆ‡æ¢åˆ°å‰å°æ—¶çš„å›è°ƒå‡½æ•°ï¼Œè¿™æ˜¯OPPOå¿«æ¸¸æˆçš„ç”Ÿå‘½å‘¨æœŸé’©å­å›è°ƒå‡½æ•°å†…éƒ¨ï¼šAop.onShow(): è°ƒç”¨SDKå†…éƒ¨çš„AOPåˆ‡é¢é€»è¾‘ï¼ˆå¯èƒ½ç”¨äºåŸ‹ç‚¹ã€ç»Ÿè®¡ç­‰ï¼‰!isAdComplete && startPlayRewardVideo(): å¦‚æœå¹¿å‘Šæœªå®Œæˆï¼Œåˆ™å°è¯•æ’­æ”¾æ¿€åŠ±è§†é¢‘å¹¿å‘Šç±»ä¼¼çš„ï¼Œç¬¬104-105è¡Œè¿˜æ³¨å†Œäº†å…¶ä»–OPPOå¿«æ¸¸æˆçš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼šonHide: æ¸¸æˆåˆ‡æ¢åˆ°åå°æ—¶è§¦å‘onError: æ¸¸æˆå‘ç”Ÿé”™è¯¯æ—¶è§¦å‘è¿™æ˜¯æ ‡å‡†çš„OPPOå¿«æ¸¸æˆå¹³å°APIè°ƒç”¨æ–¹å¼ã€‚â€‹index.ts 43-53â€‹ è¿™äº›å…¨å±€å˜é‡çš„å·¦å³â€‹index.ts 43-53â€‹ è¿™äº›å…¨å±€å˜é‡çš„å·¦å³è®©æˆ‘åˆ†æè¿™äº›å…¨å±€å˜é‡çš„ä½œç”¨ã€‚å…ˆæŸ¥çœ‹å®ƒä»¬åœ¨ä»£ç ä¸­çš„ä½¿ç”¨æƒ…å†µï¼šå·²æ¢ç´¢7æ£€ç´¢å·²æ£€ç´¢ä»£ç \badGapTimer\b6 ä¸ªç»“æœå·²æ£€ç´¢ä»£ç \bactivityStatistics\b7 ä¸ªç»“æœå·²æ£€ç´¢ä»£ç \bclickAdUniqueIdMap\b6 ä¸ªç»“æœå·²æ£€ç´¢ä»£ç \bshowAdUniqueIdMap\b8 ä¸ªç»“æœå·²æ£€ç´¢ä»£ç \bloadAdFlag\b4 ä¸ªç»“æœå·²æ£€ç´¢ä»£ç \bcallback\b6 ä¸ªç»“æœå·²æ£€ç´¢ä»£ç \bisAdComplete\b4 ä¸ªç»“æœç°åœ¨è®©æˆ‘æŸ¥çœ‹è¿™äº›å˜é‡çš„å…·ä½“ä½¿ç”¨ä¸Šä¸‹æ–‡ï¼šå·²æŸ¥çœ‹index.ts(295 - 449)å®Œç¾ï¼ç°åœ¨æˆ‘å¯ä»¥è¯¦ç»†è§£é‡Šè¿™äº›å…¨å±€å˜é‡çš„ä½œç”¨äº†ï¼šè¿™äº›å…¨å±€å˜é‡çš„ä½œç”¨typescriptlet adGapTimer = null,
  activityStatistics = {
    AdBootExposures: 0,
    AdBootCompletedPlays: 0,
    AdBootClicks: 0,
  },
  clickAdUniqueIdMap = new Map(),
  showAdUniqueIdMap = new Map(),
  loadAdFlag = false,
  callback = null,
  isAdComplete = false;1. adGapTimer - å¹¿å‘Šé—´éš”å®šæ—¶å™¨ä½œç”¨ï¼šæ§åˆ¶å¹¿å‘Šæ’­æ”¾çš„æ—¶é—´é—´éš”ç”¨é€”ï¼šåœ¨ playNextRewardVideo() ä¸­ä½¿ç”¨ï¼Œé˜²æ­¢å¹¿å‘Šæ’­æ”¾è¿‡äºé¢‘ç¹é€»è¾‘ï¼šæ¯æ¬¡æ’­æ”¾ä¸‹ä¸€ä¸ªå¹¿å‘Šå‰å…ˆæ¸…é™¤æ—§å®šæ—¶å™¨ï¼Œç„¶åå»¶è¿ŸåŠ è½½æ–°å¹¿å‘Š2. activityStatistics - æ´»åŠ¨ç»Ÿè®¡å¯¹è±¡ä½œç”¨ï¼šç»Ÿè®¡æœ¬æ¬¡å¯åŠ¨æœŸé—´çš„å¹¿å‘Šæ•°æ®å­—æ®µï¼šAdBootExposures: å¹¿å‘Šæ›å…‰æ¬¡æ•°AdBootCompletedPlays: å¹¿å‘Šå®Œæ•´æ’­æ”¾æ¬¡æ•°AdBootClicks: å¹¿å‘Šç‚¹å‡»æ¬¡æ•°ç”¨é€”ï¼šåœ¨ getCanShowAd() ä¸­åˆ¤æ–­æ˜¯å¦è¾¾åˆ°å¹¿å‘Šå±•ç¤ºä¸Šé™3. clickAdUniqueIdMap - å¹¿å‘Šç‚¹å‡»å»é‡Mapä½œç”¨ï¼šè®°å½•å·²ç‚¹å‡»è¿‡çš„å¹¿å‘ŠIDï¼Œé˜²æ­¢é‡å¤ç»Ÿè®¡ç‚¹å‡»ç±»å‹ï¼šMap<uniqueId, 1>ç”¨é€”ï¼šåœ¨å¹¿å‘Šç‚¹å‡»å›è°ƒä¸­æ£€æŸ¥ï¼Œç¡®ä¿æ¯ä¸ªå¹¿å‘Šåªç»Ÿè®¡ä¸€æ¬¡ç‚¹å‡»4. showAdUniqueIdMap - å¹¿å‘Šå±•ç¤ºå»é‡Mapä½œç”¨ï¼šè®°å½•å·²å±•ç¤ºè¿‡çš„å¹¿å‘ŠIDï¼Œé˜²æ­¢é‡å¤ç»Ÿè®¡æ›å…‰ç±»å‹ï¼šMap<uniqueId, 1>ç”¨é€”ï¼šåœ¨å¹¿å‘Šå±•ç¤ºæˆåŠŸåæ£€æŸ¥ï¼Œç¡®ä¿æ¯ä¸ªå¹¿å‘Šåªç»Ÿè®¡ä¸€æ¬¡æ›å…‰5. loadAdFlag - å¹¿å‘ŠåŠ è½½é”ä½œç”¨ï¼šé˜²æ­¢å¹¶å‘åŠ è½½å¹¿å‘Šç”¨é€”ï¼šåœ¨ playNextRewardVideo() å¼€å§‹æ—¶è®¾ä¸º trueï¼ŒåŠ è½½å®Œæˆåè®¾ä¸º falseé€»è¾‘ï¼šå¦‚æœå·²ç»åœ¨åŠ è½½ä¸­ï¼Œç›´æ¥è¿”å›ä¸é‡å¤åŠ è½½6. callback - åˆå§‹åŒ–å®Œæˆå›è°ƒä½œç”¨ï¼šå­˜å‚¨SDKåˆå§‹åŒ–å®Œæˆåéœ€è¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°ç”¨é€”ï¼šåœ¨åˆå§‹åŒ–æµç¨‹ä¸­èµ‹å€¼ï¼ˆç¬¬64è¡Œï¼‰ï¼Œå¹¿å‘Šå®Œæˆåæˆ–æ— éœ€å¹¿å‘Šæ—¶è°ƒç”¨ï¼ˆç¬¬130ã€139è¡Œï¼‰7. isAdComplete - å¹¿å‘Šå®Œæˆæ ‡å¿—ä½œç”¨ï¼šæ ‡è®°æ˜¯å¦å·²å®Œæˆå¹¿å‘Šå±•ç¤ºæµç¨‹ç”¨é€”ï¼šåœ¨ onShow å›è°ƒä¸­åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­æ’­æ”¾å¹¿å‘Šï¼ˆç¬¬104è¡Œï¼‰åœ¨ getCanShowAd() åˆ¤æ–­å¯ä»¥è·³è¿‡å¹¿å‘Šæ—¶è®¾ä¸º trueï¼ˆç¬¬138è¡Œï¼‰ç›®çš„ï¼šé¿å…åœ¨æ¸¸æˆæ˜¾ç¤ºæ—¶é‡å¤æ’­æ”¾å¹¿å‘Šè¿™äº›å˜é‡å…±åŒåä½œï¼Œå®ç°äº†å¹¿å‘Šé˜²é‡å¤ç»Ÿè®¡ã€å¹¶å‘æ§åˆ¶ã€æ’­æ”¾é™åˆ¶å’Œåˆå§‹åŒ–æµç¨‹ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚å¸®æˆ‘å®ç°æ ‡å‡†çš„æ³¨é‡Šå¸®æˆ‘å®ç°æ ‡å‡†çš„æ³¨é‡Šæˆ‘æ¥ä¸ºè¿™äº›å…¨å±€å˜é‡æ·»åŠ æ ‡å‡†çš„JSDocæ³¨é‡Šï¼šå·²æŸ¥çœ‹index.ts(1 - 200)ç°åœ¨æˆ‘ä¸ºè¿™äº›å…¨å±€å˜é‡æ·»åŠ æ ‡å‡†çš„JSDocæ³¨é‡Šï¼šâ€index.ts+48-11Må·²åº”ç”¨å®Œæˆï¼æˆ‘å·²ç»ä¸ºè¿™7ä¸ªå…¨å±€å˜é‡æ·»åŠ äº†æ ‡å‡†çš„JSDocæ³¨é‡Šï¼ŒåŒ…æ‹¬ï¼šâœ… æ·»åŠ çš„æ³¨é‡Šå†…å®¹ï¼šadGapTimer - å¹¿å‘Šé—´éš”å®šæ—¶å™¨ï¼Œæ§åˆ¶å¹¿å‘Šæ’­æ”¾æ—¶é—´é—´éš”activityStatistics - æ´»åŠ¨ç»Ÿè®¡å¯¹è±¡ï¼ŒåŒ…å«3ä¸ªå±æ€§çš„è¯¦ç»†è¯´æ˜clickAdUniqueIdMap - å¹¿å‘Šç‚¹å‡»å»é‡MapshowAdUniqueIdMap - å¹¿å‘Šå±•ç¤ºå»é‡Map loadAdFlag - å¹¿å‘ŠåŠ è½½é”ï¼Œé˜²æ­¢å¹¶å‘callback - SDKåˆå§‹åŒ–å›è°ƒå‡½æ•°isAdComplete - å¹¿å‘Šå®Œæˆæ ‡å¿—æ¯ä¸ªå˜é‡éƒ½åŒ…å«äº†ï¼šè¯¦ç»†çš„åŠŸèƒ½è¯´æ˜@type ç±»å‹æ³¨è§£å¯¹äºå¯¹è±¡ç±»å‹ï¼Œè¿˜æ·»åŠ äº† @property å±æ€§è¯´æ˜å…³äºæ˜¾ç¤ºçš„TypeScripté”™è¯¯ï¼Œè¿™äº›æ˜¯é¡¹ç›®æœ¬èº«å·²å­˜åœ¨çš„ç±»å‹å®šä¹‰é—®é¢˜ï¼ˆwindowå¯¹è±¡æ‰©å±•ã€StringåŸå‹æ‰©å±•ç­‰ï¼‰ï¼Œä¸æ˜¯æœ¬æ¬¡ä¿®æ”¹å¼•å…¥çš„ï¼Œä¸å½±å“è¿è¡Œæ—¶åŠŸèƒ½ã€‚å¸®æˆ‘æŠŠsdkä¸‹å„ä¸ªtsä¸‹çš„å…¨å±€å˜é‡æ·»åŠ æ ‡æ³¨æ³¨é‡Šå¸®æˆ‘æŠŠsdkä¸‹å„ä¸ªtsä¸‹çš„å…¨å±€å˜é‡æ·»åŠ æ ‡æ³¨æ³¨é‡Šå·²æ¢ç´¢7æ–‡ä»¶ 7ç›®å½•Beginning File EnumerationPlanning JSDoc InsertionI've outlined the plan to add JSDoc comments to global variables in the TypeScript files within the src/sdk directory. The initial steps involve listing the files and then identifying those top-level variable declarations. Next, I'll focus on crafting the standard JSDoc comment blocks for each of them.Beginning File EnumerationI'm now generating a list of TypeScript files residing in the src/sdk directory. This list will be the foundation for the subsequent stages of my efforts. Once I have the file paths, I will proceed to the next step, identifying the top-level variables declared in each file.å·²æŸ¥çœ‹ç›®å½•sdk7 ä¸ªç»“æœAnalyzing the File ListAnalyzing the File ListOkay, I've got the file list in front of me. Currently, I'm beginning with AES.ts. I intend to go through each one sequentially, starting with the first, to fully grasp their contents and functionality.å·²æŸ¥çœ‹AES.tsDefining AES VariablesDefining AES VariablesI've been reviewing the AES.ts file, and I've focused on the global variables. Currently, the code defines key and iv. I am considering how these might be best utilized within the encryption and decryption processes. I am beginning to examine how these variables impact security.å·²æŸ¥çœ‹AdNet.tsExamining Global DefinitionsClarifying Variable ScopeI'm currently wrestling with the nuances of variable scope within AdNet.ts. While the private properties resemble a kind of "global" within the class, they aren't truly top-level globals as the user may have meant. I'm focusing on clarifying this potential point of confusion regarding "å…¨å±€å˜é‡" for the user.Examining Global DefinitionsI'm now shifting my focus to Aop.ts. I see the user might be conflating private properties within AdNet.ts with actual global variables. I must ensure the documentation correctly reflects the lack of true top-level globals in that file, which is a key clarification to make. Now I'm focusing on the global variables present in Aop.ts.å·²æŸ¥çœ‹Aop.tsInvestigating Global VariablesInvestigating Global VariablesIn Aop.ts, I'm taking a close look at the global variables, particularly: rewardVideoAdIns, lockUId, isLoadAd, hcount, reqCount, reqMaxCount, clickAdUniqueIdMap, and showAdUniqueIdMap. I need to understand their function and potential impact.å·²æŸ¥çœ‹ReportSdk.tsDefining Class StructureDefining Class StructureI've been examining the ReportSdk.ts file, focusing on the class structure. It appears to be organized with private properties, which is a key design choice. I'm noting the absence of top-level global variables for now, trying to understand their implications.å·²æŸ¥çœ‹Request.tsExamining Request.tsExamining Request.tsI've been examining Request.ts and realized there are no top-level global variables. This is a crucial design choice, contributing to cleaner code. I am moving on to Startup.ts now.å·²æŸ¥çœ‹Startup.tsDefining Global ConstantsDefining Global Constants\n\nI've been working through the Startup.ts file, and I'm currently focused on the global constants defined there. Specifically, I'm analyzing the purpose and impact of isDev, apiNetworkEnumMap, and the various _hapKeys arrays. Considering how these constants influence application behavior is key. I'm taking notes on their usage and relationships.å·²æŸ¥çœ‹Util.tsDetailing Code CommentsReviewing Global UsageI'm currently focused on eliminating global variables in Util.ts. I'm also cataloging variables for comments. In AES.ts, the key and IV need descriptions. I've noted rewardVideoAdIns and lock in Aop.ts as needing documentation. Next, I'll review other files to see what global variables I may have missed.Detailing Code CommentsI've finished commenting the AES.ts file, adding descriptions for key and iv, as outlined. I am methodically working my way through the comments to be added, next focusing on Aop.ts. I will iterate through the comments, then proceed to Startup.ts after that.â€AES.ts+9Må·²åº”ç”¨Defining the Aop.ts InterfaceDefining the Aop.ts InterfaceI'm focused on the Aop.ts interface now. I've just been fleshing out the core functions, specifically around aspect application. Current thinking revolves around how to best handle pointcuts and advice execution in a clean, composable way. I'm exploring different options for the "apply" method to ensure flexibility.â€Aop.ts+32Må·²åº”ç”¨Examining Linter ErrorsExamining Linter ErrorsI've been reviewing the linter errors and, as anticipated, they're occurring due to the undefined Global and setGlobalData within the window object in the standard library. These are longstanding issues that need to be addressed in the context of our current setup.â€Startup.ts+24Må·²åº”ç”¨Verifying Variable DescriptionsRefining Documentation StructureI've just added the JSDoc comments to src/sdk/AES.ts, specifically clarifying the roles of key and iv. It's a small step, but I'm making steady progress through the files in src/sdk to ensure all global elements are properly documented.Verifying Variable DescriptionsI've completed the documentation for all global variables in src/sdk. I've added JSDoc comments to Aop.ts and Startup.ts covering all the identified elements, including comprehensive descriptions. The remaining files in src/sdk were already addressed or didn't require documentation. I'll perform a brief final review of AdNet.ts just to be certain.æˆ‘å·²ç»å®Œæˆäº†å¯¹ src/sdk ç›®å½•ä¸‹æ‰€æœ‰å…¨å±€å˜é‡çš„æ ‡å‡† JSDoc æ³¨é‡Šæ·»åŠ å·¥ä½œã€‚ä¿®æ”¹æ±‡æ€»ï¼š AES.tsï¼š ä¸º key æ·»åŠ äº†æ³¨é‡Šï¼ˆAES åŠ å¯†å¯†é’¥ï¼‰ã€‚ ä¸º iv æ·»åŠ äº†æ³¨é‡Šï¼ˆAES åŠ å¯†åç§»é‡ï¼‰ã€‚ Aop.tsï¼š ä¸º rewardVideoAdIns æ·»åŠ äº†æ³¨é‡Šï¼ˆé¢„åŠ è½½å¹¿å‘Šæ± ï¼‰ã€‚ ä¸º lockUId æ·»åŠ äº†æ³¨é‡Šï¼ˆå¹¿å‘Šä½é”å®šæ± ï¼‰ã€‚ ä¸º isLoadAd æ·»åŠ äº†æ³¨é‡Šï¼ˆåŠ è½½çŠ¶æ€é”ï¼‰ã€‚ ä¸º hcountã€reqCountã€reqMaxCount æ·»åŠ äº†ç»Ÿè®¡ç›¸å…³çš„æ³¨é‡Šã€‚ ä¸º clickAdUniqueIdMap å’Œ showAdUniqueIdMap æ·»åŠ äº†å»é‡ Map æ³¨é‡Šã€‚ Startup.tsï¼š ä¸º isDev æ·»åŠ äº†æ³¨é‡Šï¼ˆç¯å¢ƒæ ‡å¿—ï¼‰ã€‚ ä¸º apiNetworkEnumMap æ·»åŠ äº†æ³¨é‡Šï¼ˆç½‘ç»œç±»å‹æ˜ å°„ï¼‰ã€‚ ä¸º _hapKeysArrayã€_hapDataKesArrayã€_hapKeysExtArray æ·»åŠ äº† HAP é“¾è·¯å‚æ•°ç›¸å…³çš„æ³¨é‡Šã€‚å…¶ä»–æ–‡ä»¶ï¼ˆå¦‚ AdNet.tsã€ReportSdk.tsã€Request.ts å’Œ Util.tsï¼‰ä¸»è¦ä»¥ç±»æˆ–å¯¼å‡ºå‡½æ•°ä¸ºä¸»ï¼Œæ²¡æœ‰å‘ç°é¡¶å±‚çš„å…¨å±€å˜é‡ã€‚æ‰€æœ‰æ³¨é‡Šå‡åŒ…å«ï¼š åŠŸèƒ½æè¿°ï¼šè¯¦ç»†è¯´æ˜å˜é‡çš„ç”¨é€”ã€‚ ç±»å‹æ³¨è§£ (@type)ï¼šæ˜ç¡®å˜é‡çš„æ•°æ®ç±»å‹ï¼ˆå¦‚ string[]ã€Map<string, number> ç­‰ï¼‰ã€‚ å±æ€§è¯´æ˜ (@property)ï¼šå¯¹äºå¯¹è±¡ç±»å‹çš„å˜é‡ï¼Œè¯¦ç»†åˆ—å‡ºäº†å…¶å†…éƒ¨å­—æ®µçš„å«ä¹‰ã€‚ä¸ºä»€ä¹ˆåˆ‡åˆ°åå°è¦å°è¯•æ˜¾ç¤ºå¹¿å‘Šï¼Ÿä¸ºä»€ä¹ˆåˆ‡åˆ°åå°è¦å°è¯•æ˜¾ç¤ºå¹¿å‘Šï¼ŸInterpreting "Recall" MechanicsAnalyzing Background Ad TriggerI'm currently focused on the onHide event within the SDK. It appears this function is responsible for triggering an ad when the game transitions to the background. My investigation started by inspecting src/sdk/Aop.ts. Now, I'm examining how the ReportSdk instance interacts within the onHide function, specifically how it initiates ad reporting.Deconstructing tryShowPreloadedAdI'm now diving into tryShowPreloadedAd. It seems this function is the core logic behind the background ad, evaluating several conditions before displaying anything. My attention is on the platform version checks and the isShowRV flag; this determines if a reward video can be shown. It's becoming clear that the process hinges on whether certain device and state criteria are met before calling playVad or showPreloadedAd.Understanding "Exit Ad" StrategyI'm starting to grasp the bigger picture now. The core design is a form of "exit" or "recall" ad implementation. The code in Aop.ts cleverly utilizes the onHide event to trigger ad displays. The logic within tryShowPreloadedAd confirms this with its platform version checks and conditional ad presentation using either playVad or showPreloadedAd. I'm going to look deeper into the "recalltimes" variable to fully understand the ad frequency.Interpreting "Recall" MechanicsIt's become clear now: the onHide event is used for a "recall" or "exit" ad implementation. This is designed to show ads when the app goes to the background. tryShowPreloadedAd evaluates conditions such as device version and isShowRV. Specifically, recalltimes from window.Global.initialize is the key to understand this recall flow. When the user hides the app, the goal is to show the ad, and it seems to be primarily for monetization.åœ¨ Aop.ts çš„ onHideï¼ˆåˆ‡æ¢åˆ°åå°ï¼‰æ—¶å°è¯•æ˜¾ç¤ºå¹¿å‘Šï¼Œè¿™é€šå¸¸æ˜¯ SDK å®ç°çš„ä¸€ç§â€œå¬å›å¹¿å‘Šâ€ (Recall Ad) æˆ– â€œåˆ‡åå°å¼¹çª—â€ ç­–ç•¥ã€‚ä¸»è¦åŸå› å’Œé€»è¾‘å¦‚ä¸‹ï¼š1. æ ¸å¿ƒç›®çš„ï¼šæé«˜æ›å…‰ä¸å¬å›è¿™ç§åšæ³•çš„ç›®çš„æ˜¯åœ¨ç”¨æˆ·å°è¯•ç¦»å¼€æ¸¸æˆï¼ˆæŒ‰ä¸‹ Home é”®ã€åˆ‡æ¢åº”ç”¨ï¼‰çš„ä¸€ç¬é—´ï¼Œé€šè¿‡å¼¹å‡ºæ¿€åŠ±è§†é¢‘æˆ–æ’å±å¹¿å‘Šæ¥ï¼š å¢åŠ å¹¿å‘Šæ›å…‰é‡ï¼šåˆ©ç”¨ç”¨æˆ·ç¦»å¼€æ¸¸æˆçš„ç¢ç‰‡æ—¶é—´è¿›è¡Œæœ€åä¸€æ¬¡å˜ç°å°è¯•ã€‚ ç”¨æˆ·å¬å›ï¼šåœ¨æŸäº›å¹³å°ä¸Šï¼Œå¹¿å‘Šå±•ç¤ºå¯èƒ½ä¼šä¸­æ–­é€€å‡ºæµç¨‹ï¼Œæˆ–è€…åœ¨ç”¨æˆ·ä¸‹æ¬¡ç‚¹å‡»æ¸¸æˆå›¾æ ‡æ—¶å¹¿å‘Šå·²ç»å‡†å¤‡å°±ç»ªã€‚2. ä»£ç é€»è¾‘åˆ†æåœ¨ Aop.ts ä¸­å¯ä»¥çœ‹åˆ°ç›¸å…³çš„åˆ¤æ–­æ¡ä»¶ï¼štypescriptfunction tryShowPreloadedAd() {
  if (
    !window.Global?.initialize?.firstScene ||
    window.Global?.initialize?.recalltimes === "0" || // recalltimes ä¸º "0" åˆ™ä¸æ‰§è¡Œ
    hcount >= +(window.Global?.initialize?.recalltimes || 0) // è¾¾åˆ°å¬å›ä¸Šé™åˆ™ä¸æ‰§è¡Œ
  )
    return;

  // å½“æ¸¸æˆå¤„äºåå° (isHide) ä¸”å½“å‰æ²¡æœ‰æ­£åœ¨æ˜¾ç¤ºå¹¿å‘Š (!isShowRV) æ—¶
  if (window.Global && window.Global.isHide && !window.Global.isShowRV) {
    if (rewardVideoAdIns.length) {
      showPreloadedAd(); // æ˜¾ç¤ºé¢„åŠ è½½å¥½çš„å¹¿å‘Š
    }
  }
} recalltimes å‚æ•°ï¼šä» window.Global.initialize ä¸­è·å–ï¼Œè¿™è¯´æ˜è¯¥è¡Œä¸ºæ˜¯å—æœåŠ¡å™¨é…ç½®æ§åˆ¶çš„ã€‚å¦‚æœé…ç½®äº†æ¬¡æ•°ï¼ˆæ¯”å¦‚ 1 æˆ– 2ï¼‰ï¼ŒSDK å°±ä¼šåœ¨ç”¨æˆ·åˆ‡åå°æ—¶å°è¯•å±•ç¤ºå¹¿å‘Šã€‚ ç‰ˆæœ¬å…¼å®¹ï¼šä»£ç ä¸­é’ˆå¯¹ platformVersionï¼ˆå¹³å°ç‰ˆæœ¬å·ï¼‰1170 åšäº†åŒºåˆ†å¤„ç†ã€‚1170 åŠä»¥ä¸Šç‰ˆæœ¬é€šå¸¸æ”¯æŒæ›´å¤æ‚çš„é¢„åŠ è½½é€»è¾‘ã€‚3. å¸¸è§åœºæ™¯è¿™ç§ç­–ç•¥åœ¨å¿«æ¸¸æˆ (Quick Game) æˆ–å°ç¨‹åºç¯å¢ƒä¸­æ¯”è¾ƒå¸¸è§ã€‚ç”±äºå¿«æ¸¸æˆæ²¡æœ‰ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„â€œé€€å‡ºç¡®è®¤â€å¼¹çª—ï¼Œå¼€å‘è€…é€šå¸¸åˆ©ç”¨ç”Ÿå‘½å‘¨æœŸé’©å­ onHide æ¥è§¦å‘è¿™ç§â€œæœ€åä¸€ç§’â€çš„å˜ç°è¡Œä¸ºã€‚æ€»ç»“ï¼š è¿™æ˜¯ä¸€ä¸ªä¸šåŠ¡ç­–ç•¥ï¼Œé€šè¿‡åˆ©ç”¨ç”¨æˆ·åˆ‡åå°çš„æ—¶æœºæ¥è§¦å‘â€œå¬å›â€é€»è¾‘ï¼Œä»è€Œæå‡å¹¿å‘Šæ”¶ç›Šã€‚initializeæ˜¯æœåŠ¡å™¨é…ç½®ï¼Ÿinitializeæ˜¯æœåŠ¡å™¨é…ç½®ï¼Ÿå·²æ¢ç´¢1æ£€ç´¢Considering Initialization OriginConsidering Initialization OriginI'm currently investigating the source of window.Global.initialize. Given the context, I suspect it's related to server configuration. To verify, I'm now searching the codebase to pinpoint where initialize is defined and how it's populated. This should confirm its role in the application's setup.å·²æ£€ç´¢ä»“åº“How is window.Global.initialize populated and where does it come from?9 ä¸ªç»“æœæ˜¯çš„ï¼Œinitialize ç¡®å®æ˜¯æ¥è‡ªæœåŠ¡å™¨çš„é…ç½®ï¼Œå®ƒå†³å®šäº† SDK çš„åˆå§‹åŒ–è¡Œä¸ºã€‚æ ¹æ®ä»£ç åˆ†æï¼Œå®ƒçš„å…·ä½“æ¥æºå’Œä½œç”¨å¦‚ä¸‹ï¼š1. æ¥æºï¼šAB æµ‹è¯•/ä¸­å°é…ç½®æ¥å£åœ¨ Startup.ts çš„ getAbConfig() æ–¹æ³•ä¸­ï¼ŒSDK ä¼šå‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼š è¯·æ±‚åœ°å€ï¼šhttps://ab2.muchcloud.com/ab/experiment/extranet/feature/variansWithUserInfo/v2 å…³é”®å‚æ•°ï¼šfeatureKey: "initialize"æœåŠ¡å™¨è¿”å›çš„æ•°æ®ä¼šè¢«è§£æå¹¶å­˜å‚¨åˆ° window.Global ä¸­ï¼štypescript// Startup.ts ç¬¬ 688 è¡Œ
window.setGlobalData({
  abConfigV2: res.data,
  ...obj, // è¿™é‡ŒåŒ…å«äº†ä»æœåŠ¡å™¨è·å–çš„ initialize ç­‰é…ç½®å¯¹è±¡
});2. initialize é…ç½®ä¸­çš„å…³é”®å­—æ®µåœ¨ä»£ç ä¸­ï¼Œinitialize å¯¹è±¡ä¸»è¦åŒ…å«ä»¥ä¸‹æ§åˆ¶å¼€å…³ï¼š firstScene: å†³å®šæ˜¯å¦æ‰§è¡Œæ¨å¹¿é“¾è·¯é€»è¾‘ï¼ˆä¾‹å¦‚ï¼šæ˜¯å¦ä¸€è¿›æ¸¸æˆå°±è‡ªåŠ¨æ’­å¹¿å‘Šï¼‰ã€‚ recalltimes: å†³å®šåˆ‡åå°æ—¶â€œå¬å›å¹¿å‘Šâ€çš„å±•ç¤ºæ¬¡æ•°ä¸Šé™ã€‚å¦‚æœæ˜¯ "0"ï¼Œåˆ™å…³é—­è¯¥åŠŸèƒ½ã€‚ name: ç”¨äºæ•°æ®ä¸ŠæŠ¥ï¼Œæ ‡è®°å½“å‰ç”¨æˆ·å‘½ä¸­çš„æ˜¯å“ªä¸€ç»„åˆå§‹åŒ–é…ç½®ã€‚3. ä¸ºä»€ä¹ˆä½¿ç”¨æœåŠ¡å™¨é…ç½®ï¼Ÿ åŠ¨æ€æ§åˆ¶ï¼šå¼€å‘è€…æ— éœ€æ›´æ–° SDK æˆ–æ¸¸æˆåŒ…ï¼Œå°±èƒ½é€šè¿‡åå°å¼€å…³éšæ—¶å¼€å¯æˆ–å…³é—­â€œåˆ‡åå°å¼¹çª—â€ç­‰åŠŸèƒ½ã€‚ AB æµ‹è¯•ï¼šå¯ä»¥ç»™ä¸åŒçš„ç”¨æˆ·ä¸‹å‘ä¸åŒçš„ initialize é…ç½®ï¼Œæµ‹è¯•å“ªç§åˆå§‹åŒ–æ–¹æ¡ˆçš„æ”¶ç›Šæ›´é«˜æˆ–ç•™å­˜æ›´å¥½ã€‚æ€»ç»“ï¼šinitialize æ˜¯ SDK åˆå§‹åŒ–é˜¶æ®µä» AB æµ‹è¯•æœåŠ¡å™¨ è·å–çš„ç­–ç•¥é…ç½®é¡¹ã€‚è§£é‡Šè¿™å‡ ä¸ªå±æ€§çš„å«ä¹‰è§£é‡Šè¿™å‡ ä¸ªå±æ€§çš„å«ä¹‰å·²æ¢ç´¢4æ£€ç´¢Uncovering Property MeaningsDefining Attribute ContextsI'm currently focused on the initialize object and its server configurations. I'm carefully examining where the attributes mentioned earlier, like firstScene and recalltimes, are employed within the code. My goal is to pinpoint their specific roles and implications.Uncovering Property MeaningsI'm now diving deeper into the properties associated with initialize and adSpeciality. I'm using code searches to find usages, hoping to understand the role of attributes beyond firstScene and recalltimes. The goal is to comprehensively explain their functions and relationships, going beyond the initial request. I've located several related properties like ADnumbers and adResqGaptime, which I will then define.å·²æ£€ç´¢ä»£ç initialize\.|\.initialize\b|adSpeciality\.|\.adSpeciality\b0 ä¸ªç»“æœRefining the Search StrategyConsidering potential errorsI'm revisiting the regex and grep strategies. It seems possible that optional chaining or a too-narrow initial search caused me to miss some instances. I'm widening the net now, focusing specifically on those firstScene and recalltimes properties, to see if I can find them in the initialize method.Refining the Search StrategyI've decided to refine the search. My initial approach might have been too restrictive. Now, I'm directly targeting the property names I've identified, including those used in adSpeciality, expanding my search beyond just firstScene and recalltimes. This should provide a more comprehensive view of their usage within the codebase.å·²æ£€ç´¢ä»£ç firstScene|recalltimes|ADnumbers|ADbootrequest|ADdayrequest|adResqGaptime|biddingprice|recallAduNum|exitfallbackad|AdBootExposures|AdBootCompletedPlays|AdBootClicks0 ä¸ªç»“æœRe-examining the CodeChecking for DiscrepanciesI'm puzzled by this. I previously observed the expected strings in the read_file output. Now, I'm retracing my steps, double-checking the file contents, particularly in src/sdk/Aop.ts. I want to confirm the exact strings, specifically around lines 93 and 94.Re-examining the CodeI'm now running targeted searches in src/sdk/Aop.ts and src/sdk/AdNet.ts. I'm focusing on the exact strings identified, after grep_code returned nothing. I suspect a case sensitivity issue or a problem with the path in my initial search. I need to get this right.å·²æ£€ç´¢ä»£ç firstScene|recalltimes|ADnumbers|ADbootrequest|ADdayrequest|adResqGaptime|biddingprice|recallAduNum|exitfallbackad|AdBootExposures|AdBootCompletedPlays|AdBootClicks0 ä¸ªç»“æœRe-Evaluating Code ContextDouble-Checking File Paths\n\nI'm revisiting the file paths. I've been getting a strange feeling and need to confirm I haven't mixed up src/sdk/AdNet.ts and src/sdk/A op.ts. I will reread those files immediately, using read_file, to ensure the content matches the expected files.Re-Evaluating Code Context\n\nI've just finished re-examining the contents of src/sdk/AdNet.ts and src/sdk/A op.ts to clear up any path confusion. I can confirm the contents match the filenames, but I'm still uncertain. To test my understanding, I'll attempt a grep_code call with a simple pattern against the code base to build confidence in my tools.å·²æ£€ç´¢ä»£ç ADnumbers0 ä¸ªç»“æœConfirming Attribute SourcesDebugging the Workspace PathI'm now investigating the workspace path, specifically whether the project root is the culprit. My current workspace is located at c:\Users\Zhu Yun\Desktop\oppsdk\game-sdk. I'm considering using absolute paths or re-running search_codebase to see if that resolves the issue. I suspect the previous read_file calls already hold the necessary context.Revisiting Found AttributesI'm now consolidating the extracted attributes. I've successfully gathered the required details and am focusing on their meanings. I have the definitions from initialize and adSpeciality, focusing on the key attributes like firstScene, recalltimes, ADnumbers, and others, and am now clarifying their implications within the SDK.Confirming Attribute SourcesI'm now revisiting the attributes extracted from initialize and adSpeciality. I've confirmed that adSpeciality provides threshold values for AdBootExposures, AdBootCompletedPlays, and AdBootClicks via inspection of the index.ts file. My focus is now on explaining these attributes in detail, and in Chinese, to make them clear in their context.åŸºäºå¯¹ä»£ç é€»è¾‘çš„åˆ†æï¼Œè¿™å‡ ä¸ªæ ¸å¿ƒå±æ€§ä¸»è¦åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç±»æ§åˆ¶å¯åŠ¨ç­–ç•¥ (initialize)ï¼Œå¦ä¸€ç±»æ§åˆ¶å¹¿å‘Šé¢‘æ§ä¸è´¨é‡ (adSpeciality)ã€‚ä»¥ä¸‹æ˜¯å®ƒä»¬çš„å…·ä½“å«ä¹‰ï¼š1. initialize å±æ€§ï¼ˆå¯åŠ¨ç­–ç•¥ï¼‰è¿™äº›å±æ€§å†³å®šäº† SDK åœ¨æ¸¸æˆåˆšå¯åŠ¨æ—¶çš„è¡Œä¸ºï¼š firstScene (é¦–åœºæ™¯/æ¨å¹¿é“¾è·¯å¼€å…³)ï¼š å«ä¹‰ï¼šæ ‡è®°å½“å‰æ˜¯å¦å¤„äºâ€œæ¨å¹¿é“¾è·¯â€æˆ–â€œé¦–åœºæ™¯â€æ¨¡å¼ã€‚ ä½œç”¨ï¼šå¦‚æœä¸º trueï¼ŒSDK é€šå¸¸ä¼šæ‰§è¡Œæ›´æ¿€è¿›çš„ç­–ç•¥ï¼Œæ¯”å¦‚åœ¨æ¸¸æˆåˆå§‹åŒ–å®Œæˆåç«‹å³è‡ªåŠ¨å°è¯•æ’­æ”¾æ¿€åŠ±è§†é¢‘å¹¿å‘Šï¼ˆæ— éœ€ç”¨æˆ·ç‚¹å‡»ï¼‰ã€‚ recalltimes (å¬å›æ¬¡æ•°)ï¼š å«ä¹‰ï¼šç”¨æˆ·åˆ‡æ¢åå°æ—¶çš„å¹¿å‘Šâ€œå¬å›â€é™åˆ¶æ¬¡æ•°ã€‚ ä½œç”¨ï¼šæ§åˆ¶ç”¨æˆ·åœ¨ä¸€æ¬¡æ¸¸æˆç”Ÿå‘½å‘¨æœŸå†…ï¼Œåˆ‡åˆ°åå°æ—¶æœ€å¤šèƒ½å¼¹å‡ºå¤šå°‘æ¬¡å¹¿å‘Šã€‚å¦‚æœè®¾ä¸º "0"ï¼Œåˆ™å…³é—­åˆ‡åå°å¼¹å¹¿å‘Šçš„åŠŸèƒ½ã€‚2. adSpeciality å±æ€§ï¼ˆå¹¿å‘Šé«˜çº§é…ç½®ï¼‰è¿™äº›å±æ€§é€šå¸¸ç”¨äºç²¾ç»†åŒ–æ§åˆ¶å¹¿å‘Šçš„å±•ç¤ºé¢‘ç‡ã€è¯·æ±‚ä¸Šé™å’Œç«ä»·ç­–ç•¥ï¼š ADnumbers (ç¼“å­˜æ± ä¸Šé™)ï¼š å«ä¹‰ï¼šæ¿€åŠ±è§†é¢‘å¹¿å‘Šç¼“å­˜æ±  (adRVCacheList) çš„æœ€å¤§å®¹é‡ã€‚ ä½œç”¨ï¼šSDK ä¼šå°è¯•é¢„åŠ è½½å¹¿å‘Šï¼Œä½†æ± å­é‡Œçš„å¹¿å‘Šæ•°é‡ä¸ä¼šè¶…è¿‡è¿™ä¸ªå€¼ï¼Œä»¥èŠ‚çœæ€§èƒ½å’Œæµé‡ã€‚ ADbootrequest (å•æ¬¡å¯åŠ¨è¯·æ±‚ä¸Šé™)ï¼š å«ä¹‰ï¼šæœ¬æ¬¡æ¸¸æˆè¿è¡ŒæœŸé—´ï¼Œå…è®¸å‘èµ·å¹¿å‘Šè¯·æ±‚çš„æ€»æ¬¡æ•°ã€‚ ä½œç”¨ï¼šé˜²æ­¢åœ¨ä¸€æ¬¡æ¸¸æˆä¸­æ— é™åˆ¶åœ°è¯·æ±‚å¹¿å‘Šã€‚ ADdayrequest (æ¯æ—¥è¯·æ±‚ä¸Šé™)ï¼š å«ä¹‰ï¼šå•ä¸ªè®¾å¤‡åœ¨ 24 å°æ—¶å†…å…è®¸å‘èµ·å¹¿å‘Šè¯·æ±‚çš„æ€»æ¬¡æ•°ã€‚ ä½œç”¨ï¼šä¸¥æ ¼æ§åˆ¶æ¯æ—¥å¹¿å‘Šè´Ÿè·ã€‚ adResqGaptime (è¯·æ±‚è¶…æ—¶æ—¶é—´)ï¼š å«ä¹‰ï¼šå¹¿å‘Šè¯·æ±‚çš„è¶…æ—¶é˜ˆå€¼ï¼ˆå•ä½é€šå¸¸ä¸ºæ¯«ç§’ï¼‰ã€‚ ä½œç”¨ï¼šå¦‚æœå¹¿å‘Šåœ¨è§„å®šæ—¶é—´å†…æ²¡æœ‰åŠ è½½æˆåŠŸï¼ŒSDK ä¼šè§¦å‘è¶…æ—¶é€»è¾‘å¹¶å°è¯•åŠ è½½ä¸‹ä¸€ä¸ªã€‚ biddingprice (ç«ä»·åº•ä»·)ï¼š å«ä¹‰ï¼šå®æ—¶ç«ä»·å¹¿å‘Šçš„æœ€ä½æ¥å—ä»·æ ¼ã€‚ ä½œç”¨ï¼šåªæœ‰å½“å¹¿å‘Šå•†è¿”å›çš„ ECPMï¼ˆåƒæ¬¡å±•ç¤ºæ”¶ç›Šï¼‰å¤§äºç­‰äºè¿™ä¸ªå€¼æ—¶ï¼Œå¹¿å‘Šæ‰ä¼šè¢«å…è®¸å±•ç¤ºã€‚ recallAduNum (å¬å›å¹¿å‘Šä½æ•°é‡)ï¼š å«ä¹‰ï¼šä¸“é—¨ç•™ç»™â€œåˆ‡åå°å¬å›â€åœºæ™¯ä½¿ç”¨çš„å¹¿å‘Šä½æ•°é‡ã€‚ ä½œç”¨ï¼šåœ¨åˆå§‹åŒ–å¹¿å‘Šåˆ—è¡¨æ—¶ï¼Œä¼šæå‰é¢„ç•™å‡ ä¸ªå¹¿å‘Šä½ä¸“é—¨ç”¨äºåå°å¬å›ã€‚ exitfallbackad (å…œåº•é€€å‡ºå¼€å…³)ï¼š å«ä¹‰ï¼šå…œåº•å¹¿å‘Šï¼ˆFallback Adï¼‰å±•ç¤ºåçš„é€€å‡ºé€»è¾‘æ§åˆ¶ã€‚ ä½œç”¨ï¼šå¦‚æœå¼€å¯ä¸”å½“å‰å±•ç¤ºçš„æ˜¯å…œåº•å¹¿å‘Šï¼Œç”¨æˆ·å…³é—­å¹¿å‘Šåå¯èƒ½ä¼šç›´æ¥æ‰§è¡Œé€€å‡ºæ¸¸æˆçš„é€»è¾‘ã€‚3. ç»Ÿè®¡é˜ˆå€¼å±æ€§åœ¨ index.ts çš„ getCanShowAd å‡½æ•°ä¸­ä½¿ç”¨çš„å±æ€§ï¼š AdBootExposures / AdBootCompletedPlays / AdBootClicksï¼š å«ä¹‰ï¼šåˆ†åˆ«å¯¹åº”æœ¬æ¬¡å¯åŠ¨çš„æ›å…‰ã€å®Œæ’­ã€ç‚¹å‡»çš„ä¸Šé™é˜€å€¼ã€‚ ä½œç”¨ï¼šå½“æœ¬æ¬¡å¯åŠ¨çš„ç»Ÿè®¡æ•°æ®è¾¾åˆ°è¿™äº›å€¼æ—¶ï¼ŒSDK ä¼šè®¤ä¸ºå¹¿å‘Šä»»åŠ¡å·²å®Œæˆï¼Œä¸å†ä¸»åŠ¨å¼¹å‡ºæ–°å¹¿å‘Šã€‚è¿™äº›å±æ€§å…±åŒæ„æˆäº† SDK çš„åŠ¨æ€è¿è¥èƒ½åŠ›ï¼Œå…è®¸å¼€å‘è€…åœ¨ä¸æ”¹åŠ¨ä»£ç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡äº‘ç«¯åå°è°ƒæ•´æ¸¸æˆçš„å¹¿å‘Šå˜ç°å¼ºåº¦ã€‚window.setGlobalData({

  abConfigV2: res.data,

  ...obj, // è¿™é‡ŒåŒ…å«äº†ä»æœåŠ¡å™¨è·å–çš„ initialize ç­‰é…ç½®å¯¹è±¡

});
è¿™äº›å±æ€§åŒ…å«adSpecialityå’Œinitializeå±æ€§å—window.setGlobalData({

  abConfigV2: res.data,

  ...obj, // è¿™é‡ŒåŒ…å«äº†ä»æœåŠ¡å™¨è·å–çš„ initialize ç­‰é…ç½®å¯¹è±¡

});
è¿™äº›å±æ€§åŒ…å«adSpecialityå’Œinitializeå±æ€§å—å·²æŸ¥çœ‹Startup.ts(668 - 867)ä¸å®Œå…¨æ˜¯ï¼Œå®ƒä»¬æ¥è‡ªä¸åŒçš„æ¥å£ï¼Œå­˜å‚¨åˆ°ä¸åŒçš„é…ç½®å¯¹è±¡ä¸­ã€‚è®©æˆ‘æ¢³ç†ä¸€ä¸‹ï¼šé…ç½®æ¥æºåˆ†æ1. initialize å±æ€§æ¥æºï¼šgetAbConfig() æ–¹æ³•ï¼ˆç¬¬ 688-691 è¡Œï¼‰typescriptwindow.setGlobalData({
  abConfigV2: res.data,
  ...obj, // è¿™é‡Œçš„ obj åŒ…å« initialize å¯¹è±¡
});è·¯å¾„ï¼šæ¥å£åœ°å€ï¼šhttps://ab2.muchcloud.com/ab/experiment/extranet/feature/variansWithUserInfo/v2è¯·æ±‚å‚æ•°ï¼šfeatureKey: "initialize"å“åº”è§£æï¼šæœåŠ¡å™¨è¿”å›çš„ res.data.featureVariantInfo.initialize.content è¢«è§£æåç›´æ¥å±•å¼€åˆ° window.Global ä¸­ã€‚ç»“æœï¼šwindow.Global.initialize åŒ…å« firstSceneã€recalltimes ç­‰å±æ€§ã€‚2. adSpeciality å±æ€§æ¥æºï¼šgetAdNetConfig() æ–¹æ³•ï¼ˆç¬¬ 808-810 è¡Œï¼‰typescriptlet json = Object.assign(
  {},
  res?.abHitSpeciality?.variant_json?.AdFrequencyControl || {},
  res?.abHitSpeciality?.variant_json?.globalfeature || {}
);
window.setGlobalData({
  adConfigV3: res,
  adSpeciality: json, // è¿™é‡Œè®¾ç½®çš„ adSpeciality
});è·¯å¾„ï¼šæ¥å£åœ°å€ï¼šhttps://adnet4-go.muchcloud.com/adNet/getV3è¯·æ±‚å‚æ•°ï¼šfeature_key: "adReqFeatureV5180"å“åº”è§£æï¼šä» res.abHitSpeciality.variant_json.AdFrequencyControl å’Œ globalfeature åˆå¹¶è€Œæ¥ã€‚åŒ…å« ADnumbersã€ADbootrequestã€biddingprice ç­‰å¹¿å‘Šæ§åˆ¶å‚æ•°ã€‚ç»“æœï¼šwindow.Global.adSpeciality å­˜å‚¨å¹¿å‘Šé¢‘æ§ç›¸å…³é…ç½®ã€‚æ€»ç»“ å±æ€§  æ¥æºæ¥å£  å­˜å‚¨ä½ç½®  ä¸»è¦å†…å®¹  initialize  getAbConfig() (ABæµ‹è¯•æ¥å£)  window.Global.initialize  firstSceneã€recalltimesã€name ç­‰å¯åŠ¨ç­–ç•¥  adSpeciality  getAdNetConfig() (å¹¿å‘Šç½‘ç»œæ¥å£)  window.Global.adSpeciality  ADnumbersã€ADbootrequestã€biddingprice ç­‰å¹¿å‘Šé¢‘æ§ æ‰€ä»¥ï¼Œç¬¬ 688 è¡Œçš„ ...obj åªåŒ…å« initializeï¼Œä¸åŒ…å« adSpecialityã€‚adSpeciality æ˜¯åœ¨ç¬¬ 810 è¡Œå•ç‹¬è®¾ç½®çš„ã€‚å¸®æˆ‘åœ¨stratè¿›è¡Œè¿™ä¸¤ä¸ªå‡½æ•°çš„æ ‡å‡†æ³¨é‡Šå¸®æˆ‘åœ¨stratè¿›è¡Œè¿™ä¸¤ä¸ªå‡½æ•°çš„æ ‡å‡†æ³¨é‡Šæˆ‘æ¥ä¸º getAbConfig() å’Œ getAdNetConfig() è¿™ä¸¤ä¸ªå‡½æ•°æ·»åŠ æ ‡å‡†æ³¨é‡Šï¼šâ€Startup.ts+28Må·²åº”ç”¨å®Œæˆï¼æˆ‘å·²ç»ä¸º Startup.ts ä¸­çš„ä¸¤ä¸ªå…³é”®å‡½æ•°æ·»åŠ äº†æ ‡å‡† JSDoc æ³¨é‡Šï¼šâœ… æ·»åŠ çš„æ³¨é‡Šå†…å®¹1. getAbConfig() å‡½æ•°ï¼ˆç¬¬ 556 è¡Œï¼‰typescript/**
 * è·å–ABæµ‹è¯•é…ç½®ï¼ˆåŒ…å«initializeå¯åŠ¨ç­–ç•¥ï¼‰
 * @description ä»ä¸­å°ABå®éªŒå¹³å°æ‹‰å–é…ç½®ï¼Œä¸»è¦åŒ…å«initializeå¯¹è±¡
 * @returns {Promise} è¿”å›é…ç½®æ•°æ®æˆ–null
 * @example
 * // initializeå¯¹è±¡ç¤ºä¾‹ï¼š
 * // {
 * //   firstScene: true,      // æ˜¯å¦æ‰§è¡Œæ¨å¹¿é“¾è·¯é€»è¾‘
 * //   recalltimes: "2",      // åˆ‡åå°å¬å›å¹¿å‘Šæ¬¡æ•°ä¸Šé™
 * //   name: "variant_A"      // ABæµ‹è¯•åˆ†ç»„æ ‡è¯†
 * // }
 */2. getAdNetConfig() å‡½æ•°ï¼ˆç¬¬ 745 è¡Œï¼‰typescript/**
 * è·å–å¹¿å‘Šç½‘ç»œé…ç½®ï¼ˆåŒ…å«adSpecialityå¹¿å‘Šé¢‘æ§ç­–ç•¥ï¼‰
 * @description ä»AdNetå¹¿å‘Šç®¡ç†å¹³å°æ‹‰å–é…ç½®ï¼Œè§£æåè®¾ç½®adSpecialityå’Œå¹¿å‘Šé˜Ÿåˆ—
 * @returns {Promise} è¿”å›é…ç½®æ•°æ®æˆ–null
 * @example
 * // adSpecialityå¯¹è±¡ç¤ºä¾‹ï¼ˆåˆå¹¶è‡ªAdFrequencyControlå’Œglobalfeatureï¼‰ï¼š
 * // {
 * //   ADnumbers: 3,              // å¹¿å‘Šç¼“å­˜æ± ä¸Šé™
 * //   ADbootrequest: 50,         // å•æ¬¡å¯åŠ¨è¯·æ±‚ä¸Šé™
 * //   ADdayrequest: 100,         // æ¯æ—¥è¯·æ±‚ä¸Šé™
 * //   adResqGaptime: 3000,       // è¯·æ±‚è¶…æ—¶æ—¶é—´(ms)
 * //   biddingprice: 10,          // ç«ä»·åº•ä»·
 * //   recallAduNum: 3,           // å¬å›å¹¿å‘Šä½æ•°é‡
 * //   exitfallbackad: false      // å…œåº•å¹¿å‘Šé€€å‡ºå¼€å…³
 * // }
 */ğŸ“ æ³¨é‡Šç‰¹ç‚¹åŠŸèƒ½è¯´æ˜ï¼šæ¸…æ™°æè¿°å‡½æ•°çš„ä½œç”¨å’Œæ¥æºè¿”å›å€¼è¯´æ˜ï¼šä½¿ç”¨ @returns æ ‡æ³¨è¿”å›ç±»å‹ä»£ç ç¤ºä¾‹ï¼šé€šè¿‡ @example å±•ç¤ºå®é™…çš„é…ç½®å¯¹è±¡ç»“æ„å­—æ®µæ³¨é‡Šï¼šæ¯ä¸ªé…ç½®å±æ€§éƒ½æœ‰è¯¦ç»†çš„ä¸­æ–‡è¯´æ˜è¿™äº›æ³¨é‡Šå¸®åŠ©å¼€å‘è€…å¿«é€Ÿç†è§£è¿™ä¸¤ä¸ªå‡½æ•°åˆ†åˆ«è´Ÿè´£æ‹‰å–å“ªäº›é…ç½®ï¼Œä»¥åŠé…ç½®å¯¹è±¡çš„å…·ä½“ç»“æ„ã€‚å…³äº TypeScript ç±»å‹é”™è¯¯ï¼Œè¿™äº›æ˜¯é¡¹ç›®ç°æœ‰çš„ç±»å‹å®šä¹‰é—®é¢˜ï¼ˆwindow.Global ç­‰æ‰©å±•å±æ€§ï¼‰ï¼Œä¸å½±å“è¿è¡Œæ—¶åŠŸèƒ½ã€‚