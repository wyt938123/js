我将为你详细介绍 src/sdk 目录下各个核心文件的作用。这些文件共同构成了该游戏 SDK 的基础架构，涵盖了从初始化、网络通信、加密到数据上报的完整链路。为了给出更精确的解释，我将先快速查看这些文件的内容。
正在查阅 src/sdk 目录下的核心文件以了解其具体实现...
已探索
7文件
src/sdk 目录下的文件构成了该 SDK 的核心功能模块。以下是每个文件的详细功能解释：
1. AES.ts (加密解密模块)
核心作用：负责对 SDK 从服务端获取的配置数据进行解密。
具体功能：
使用 AES-CBC-Pkcs7 模式进行解密。
内置了固定的加密密钥（Key）和偏移量（IV）。
在解密失败或 JSON 解析失败时，会自动通过 ReportSdk 上报系统异常日志，便于排查线上配置下发问题。
2. AdNet.ts (广告管理模块)
核心作用：广告网络（Ad Network）的核心调度中心，采用单例模式。
具体功能：
缓存池管理：维护一个激励视频广告的缓存池 (adRVCacheList)，支持根据价格（ECPM）自动排序。
加载逻辑：支持并行（Parallel）和串行（Serial）加载广告位，实现了复杂的瀑布流（Waterfall）请求逻辑。
实时竞价（Bidding）：处理竞价广告的展示胜出 (notifyAdRankWin) 和失败通知。
限频控制：结合本地存储（localStorage）和配置，限制每日及每次启动的广告请求次数。
3. Aop.ts (生命周期与切面管理)
核心作用：管理应用的生命周期钩子（Aspect Oriented Programming 思想的简化版）和广告的预加载展示。
具体功能：
监听切后台/回前台：在 onShow 和 onHide 时记录日志，并根据配置决定是否在回到前台时自动弹出预加载的广告。
异常捕获：提供全局 onError 捕获并上报异常。
预加载调度：在后台或回前台时，自动调用 AdNet 的方法去补充广告缓存池。
4. ReportSdk.ts (数据上报模块)
核心作用：全量埋点和日志上报的中心，采用单例模式。
具体功能：
通用上报：提供基础的 report 方法，所有事件都会附带设备信息（品牌、机型、网络状态等）。
广告链路追踪：内置了针对广告请求、曝光、点击、渲染失败、超时等全链路的专用上报函数。
缓存机制：如果核心配置未就绪，上报数据会先存入 cacheReportArr，待初始化完成后批量补报。
5. Request.ts (网络请求工具)
核心作用：基于 XMLHttpRequest 封装的底层网络库。
具体功能：
支持 GET/POST 请求，自动处理超时（默认 5000ms）。
请求签名：自动在 Header 中添加时间戳（Xts）和 MD5 签名（Xsign），用于服务端接口鉴权。
性能监控：内置 reportInterfaceTime，如果接口响应超过 2 秒，会自动上报接口时长数据。
6. Startup.ts (初始化引擎)
核心作用：SDK 的启动器，负责所有模块的初始化和环境配置获取。
具体功能：
环境采集：采集设备 ID（OAID）、IP 地址、系统信息、网络类型、剪贴板数据等。
多维度配置获取：
getConfig：获取全局业务配置。
getAbConfig：获取 A/B 测试配置。
getAdNetConfig：获取广告策略配置。
数据聚合：将采集到的所有环境参数整理并设置到 ReportSdk 和全局 window.Global 中。
7. Util.ts (工具函数库)
核心作用：提供跨模块的通用辅助函数。
具体功能：
getFormatDate：日期格式化。
generateRandomString：生成随机字符串（常用于生成广告唯一标识 uniqueId）。
getTodayAdFinish / getTodayReqAdFinish：通过 localStorage 检查今日的广告展示/请求数量是否已达上限。
exit：统一封装的退出应用/小程序的方法。
checkForUpdates：检查并触发 RPK 版本的更新。
总结：这套架构是一个典型的配置驱动型 SDK。由 Startup 负责拉取策略，AdNet 负责执行广告逻辑，ReportSdk 负责全流程监控，Aop 负责挂载生命周期，各模块分工明确且高度解耦