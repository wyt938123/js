<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <!-- //左闭右闭，就是在左右边界都可以取到值，当left
    if (nums[middle] > target) 
    right 要赋值为 middle - 1，
    --------------在[]内--因为当前这个nums[middle]一定不是target，
    因为我们是左右闭合区间，下一步我们还要在区间内取值，所以right = middle - 1； -->
    <script>
        // --------------------------------------------//区间到这个位置 查找的是>的区间
        const nums = [5, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 10, 11];
        let target = 8
        var searchleft = function (nums, target) {
            // 处理空数组
            if (nums.length === 0) return -1;
            let left = 0;
            let right = nums.length - 1;
            // 初始值设为-1（表示不存在）
            let res = -1;

            while (left <= right) {
                const mid = left + Math.floor((right - left) / 2);
                if (nums[mid] === target) {
                    // 找到目标，记录位置并向左收缩（找左边界）
                    res = mid;
                    right = mid - 1;
                } else if (nums[mid] < target) {
                    // 目标在右侧，左指针右移
                    left = mid + 1;
                } else {
                    // 目标在左侧，右指针左移
                    right = mid - 1;
                }
            }
            // 最终返回记录的左边界（不存在则为-1）
            return res;
        };

        // 查找右边界：返回最后一个等于target的索引，不存在返回-1
        var searchright = function (nums, target) {
            if (nums.length === 0) return -1;
            let left = 0;
            let right = nums.length - 1;
            let res = -1;

            while (left <= right) {
                const mid = left + Math.floor((right - left) / 2);
                if (nums[mid] === target) {
                    // 找到目标，记录位置并向右收缩（找右边界）
                    res = mid;
                    left = mid + 1;
                } else if (nums[mid] < target) {
                    left = mid + 1;
                } else {
                    right = mid - 1;
                }
            }
            return res;
        };
        var searchRange = function(nums, target){
            const leftIndex = searchleft(nums, target);
            const rightIndex = searchright(nums, target);
            if(leftIndex === -1 || rightIndex === -1) {
                return [-1, -1];
            }
            return [leftIndex, rightIndex];
        }


        console.log(searchleft(nums, target));
        console.log(searchright(nums, target));
        // var searchleft = function (nums, target) {
        //     let left = 0;
        //     let right = nums.length - 1;
        //     let mid = 0;
        //     let tmp = 0;
        //     while (left <= right) {
        //         mid = left + Math.floor((right - left) / 2);
        //         console.log(left, right, mid);
        //         //等于的时候  mid
        //         if (nums[mid] < target) {

        //             left = mid + 1;
        //             tmp = left-1;
        //         }
        //         //等于的时候更新边界
        //         else if (nums[mid] === target) {
        //             left = mid + 1;
        //             tmp = left-1;
        //         } else {
        //             //
        //             right = mid - 1;
        //         }
        //     };
        //     return tmp;

        // }
        // var searchright = function (nums, target) {
        //     let left = 0;
        //     let right = nums.length - 1;
        //     let mid = 0;
        //     let tmp = 0;
        //     while (left <= right) {
        //         mid = left + Math.floor((right - left) / 2);
        //         console.log(left, right, mid);
        //         //等于的时候  mid
        //         if (nums[mid] < target) {

        //             left = mid + 1;
        //         }
        //         //等于的时候更新边界
        //         else if (nums[mid] === target) {
        //             right = mid - 1;
        //             tmp = right+1;
        //         } else {
        //             //
        //             right = mid - 1;
        //             tmp = right+1;
        //         }
        //     };
        //     return tmp;

        // }

    </script>
</body>

</html>