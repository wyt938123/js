<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //最好的方法
        //寄生式实现原型的继承
        //组合了寄生式继承和构造函数继承的优点


        //         优点：

        // 只调用一次父类构造函数
        // Child可以向Parent传参
        // 父类方法可以复用
        // 父类的引用属性不会被共享
        // 寄生式组合继承可以算是引用类型继承的最佳模式


        function objectCopy(obj) {
            function Fun() { };
            Fun.prototype = obj;
            return new Fun();
        }
        //实现原型继承
        function inheritPrototype(child, parent) {
            let prototype = objectCopy(parent.prototype); // 创建对象
            prototype.constructor = child; // 增强对象
            child.prototype = prototype; // 赋值对象
        }

        function Parent(name) {
            this.name = name;
            this.friends = ["rose", "lily", "tom"]
        }

        Parent.prototype.sayName = function () {
            console.log(this.name);
        }

        function Child(name, age) {
            Parent.call(this, name);
            this.age = age;
        }

        inheritPrototype(Child, Parent);
        Child.prototype.sayAge = function () {
            console.log(this.age);
        }

        let child1 = new Child("yhd", 23);
        child1.sayAge(); // 23
        child1.sayName(); // yhd
        child1.friends.push("jack");
        console.log(child1.friends); // ["rose", "lily", "tom", "jack"]

        let child2 = new Child("yl", 22)
        child2.sayAge(); // 22
        child2.sayName(); // yl
        console.log(child2.friends); // ["rose", "lily", "tom"]

    </script>
</body>

</html>